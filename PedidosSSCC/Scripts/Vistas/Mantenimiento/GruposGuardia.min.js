function abrirModalGrupo(n){const t=JSON.parse(n.getAttribute("data-grupo"));$("#grupoId").val(t.GRG_Id);$("#grupoNombre").val(t.GRG_Nombre);$("#grupoNombre").removeClass("is-invalid");$("#modalGrupoGuardia").modal("show")}async function eliminarGrupoAjax(n){try{const t=await $.ajax({url:AppConfig.urls.EliminarGrupoGuardia,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({idGrupo:n}),dataType:"json"});t.success?(mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success),$("#table").DataTable().ajax.reload(null,!1)):mostrarToast("No se puede eliminar el grupo.",TipoToast.Warning)}catch(t){registrarErrorjQuery(t.status||"",t.message||t)}}function eliminarGrupo(n){const t=JSON.parse(n.getAttribute("data-grupo"));mostrarAlertaConfirmacion({titulo:`¿Estás seguro de que deseas eliminar el grupo '${t.GRG_Nombre}'?`,onConfirmar:()=>eliminarGrupoAjax(t.GRG_Id)})}$(document).ready(function(){function t(){const t=localStorage.getItem(n);if(t){const n=JSON.parse(t);$("#formBuscar").val(n.general)}r()}function i(){const t={general:$("#formBuscar").val()};localStorage.setItem(n,JSON.stringify(t))}function r(){const n=inicializarDataTable("#table",{ajax:{url:AppConfig.urls.ObtenerGruposGuardia,type:"GET",dataSrc:""},columns:[{data:"GRG_Id",title:"Id"},{data:"GRG_Nombre",title:"Nombre"},{className:"td-btn",data:null,title:'<span class="sReader">Acción<\/span>',responsivePriority:2,orderable:!1,render:function(n,t,i){return`
                            <button type="button" class="btn btn-icon btn-editar btn-outline-secondary"
                                    data-grupo="${JSON.stringify(i).replace(/"/g,"&quot;")}"
                                    onclick="abrirModalGrupo(this)">
                                <i class="bi bi-pencil-square" title="Editar"></i>
                            </button>
                            <button type="button" class="btn btn-icon btn-eliminar btn-outline-secondary"
                                    data-grupo="${JSON.stringify(i).replace(/"/g,"&quot;")}"
                                    onclick="eliminarGrupo(this)">
                                <i class="bi bi-trash" title="Eliminar"></i>
                            </button>`}}]},[],"export_grupos_guardia");$(window).resize(()=>n.columns.adjust().draw());$("#formBuscar").on("keyup input",function(){n.search(this.value,!1,!1).draw();i()})}let n="datatable_filters_tablaGruposGuardia";VerificarSesionActiva(OpcionMenu.GruposGuardia).then(()=>{t()});$("#btnNuevo").on("click",function(){$("#grupoId").val("");$("#grupoNombre").val("");$("#grupoNombre").removeClass("is-invalid");$("#modalGrupoGuardia").modal("show")});$("#btnGuardarGrupo").on("click",function(){const n=$("#grupoNombre").val().trim();let t=[];if(n?$("#grupoNombre").removeClass("is-invalid"):($("#grupoNombre").addClass("is-invalid"),t.push("Nombre")),t.length>0){mostrarToast(AppConfig.mensajes.camposObligatorios,TipoToast.Warning);return}const i={GRG_Id:$("#grupoId").val(),GRG_Nombre:n};$.ajax({url:AppConfig.urls.GuardarGrupoGuardia,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(i),dataType:"json"}).done(function(n){n.success?(mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success),$("#modalGrupoGuardia").modal("hide"),$("#table").DataTable().ajax.reload(null,!1)):mostrarToast("Error al guardar el grupo.",TipoToast.Error)}).fail(function(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)})})});