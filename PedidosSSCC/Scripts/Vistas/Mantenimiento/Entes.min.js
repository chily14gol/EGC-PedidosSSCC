async function editarEnte(n){const t=JSON.parse(n.getAttribute("data-ente"));$("#idEnte").val(t.ENT_Id);$("#empresa").val(t.ENT_EMP_Id);await cargarComboDepartamentosEmpresa(t.ENT_EMP_Id);$("#departamento").val(t.ENT_EDE_Id);$("#nombre").val(t.ENT_Nombre);$("#email").val(t.ENT_Email);$("#tipoEnte").val(t.ENT_TEN_Id);$("#oficina").val(t.ENT_OFI_Id);$("#modalEditarLabel").text("Editar Entidad");$("#modalEditar").modal("show")}async function cargarComboDepartamentosEmpresa(n){try{const i=await $.ajax({url:AppConfig.urls.ObtenerDepartamentosEmpresa,type:"GET",contentType:"application/json",data:{idEmpresa:n},dataType:"json"}),t=$("#departamento");t.empty().append('<option value="">Seleccione Departamento<\/option>');i.forEach(n=>{t.append(`<option value="${n.EDE_Id}">${n.EDE_Nombre}</option>`)})}catch(t){const n=obtenerMensajeErrorAjax(t);registrarErrorjQuery(t.status,n)}}function eliminarEnte(n){const t=JSON.parse(n.getAttribute("data-ente"));mostrarAlertaConfirmacion({titulo:`¿Estás seguro de que deseas eliminar el ente '${t.ENT_Nombre}'?`,onConfirmar:()=>{$.ajax({url:AppConfig.urls.EliminarEnte,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({idEnte:t.ENT_Id}),dataType:"json"}).done(n=>{n.success?(mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success),$("#table").DataTable().ajax.reload(null,!1)):mostrarToast("No se puede eliminar. Tiene licencias asociadas",TipoToast.Warning)}).fail(n=>{const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)})}})}function verAplicaciones(n){let t=JSON.parse(n.getAttribute("data-ente"));$("#idEnteAplicacion").val(t.ENT_Id);$("#aplicaciones").val("");$("#fechaInicio").val("");$("#fechaFin").val("");ObtenerAplicaciones(t.ENT_Id);$("#modalAplicaciones").modal("show")}function editarAplicacion(n){let t=JSON.parse(n.getAttribute("data-ente"));$("#idAplicacionOriginal").val(t.ENL_APP_Id);$("#aplicaciones").val(t.ENL_APP_Id);$("#fechaInicioOriginal").val(t.FechaInicio);$("#fechaInicio").val(formatDateInputForDateField(t.FechaInicio));$("#fechaFin").val(formatDateInputForDateField(t.FechaFin));$("#modalAplicaciones").modal("show")}function eliminarAplicacion(n){setTimeout(()=>{let t=JSON.parse(n.getAttribute("data-app"));mostrarAlertaConfirmacion({titulo:`¿Eliminar asignación de '${t.NombreAplicacion}'?`,backdrop:!1,onConfirmar:function(){$.ajax({url:AppConfig.urls.EliminarAplicacionEnte,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({idAplicacion:t.ENL_APP_Id,idEnte:t.ENL_ENT_Id,fechaInicio:toISODate(t.ENL_FechaInicio)}),dataType:"json"}).done(function(n){if(n.success){mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success);let n=$("#tableAplicaciones").DataTable();n.ajax.reload(null,!1)}else registrarErrorjQuery(n.status,n.message)}).fail(function(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)})}})},300)}function ObtenerAplicaciones(n){let t=inicializarDataTable("#tableAplicaciones",{paging:!1,searching:!1,info:!1,ordering:!1,dom:"t",ajax:{url:AppConfig.urls.ObtenerAplicacionesPorEntidad,type:"GET",data:{idEnte:n},dataSrc:""},rowId:n=>`fila-app-${n.ENL_APP_Id}`,columns:[{data:"NombreAplicacion",title:"Aplicación"},{data:"ENL_FechaInicio",render:formatDateToDDMMYYYY,title:"Fecha Inicio"},{data:"ENL_FechaFin",render:formatDateToDDMMYYYY,title:"Fecha Fin"},{className:"td-btn",data:null,title:"",orderable:!1,render:(n,t,i)=>{const r=JSON.stringify(i).replace(/"/g,"&quot;");return`
                          <button class="btn btn-icon btn-eliminar" data-app="${r}" onclick="eliminarAplicacion(this)">
                            <i class="bi bi-trash" title="Eliminar"></i>
                          </button>`}}]});$(window).resize(()=>t.columns.adjust().draw())}function verLicencias(n){let t=JSON.parse(n.getAttribute("data-ente"));$("#idEnteLicencias").val(t.ENT_Id);$("#licencias, #fechaInicio, #fechaFin").val("");ObtenerLicencias(t.ENT_Id);$("#modalLicencias").modal("show")}function ObtenerLicencias(n){let t=inicializarDataTable("#tableLicencias",{paging:!1,searching:!1,info:!1,ordering:!1,dom:"t",ajax:{url:AppConfig.urls.ObtenerLicenciasPorEnte,type:"GET",dataSrc:function(n){return n},data:{idEnte:n},dataType:"json"},rowId:function(n){return`fila-${n.EntidadId}-${n.LicenciaId}-${n.FechaInicio?.substring(0,10)}`},columns:[{data:"NombreLicencia",title:"Licencia",render:function(n){return`<span title="${n}">${n}</span>`}},{data:"FechaInicio",title:"Fecha Inicio",render:formatDateToDDMMYYYY},{data:"FechaFin",title:"Fecha Fin",render:formatDateToDDMMYYYY},{className:"td-btn",data:null,title:'<span class="sReader">Acción<\/span>',responsivePriority:2,orderable:!1,render:function(n,t,i){return`
                            <button type="button" class="btn btn-icon btn-eliminar btn-outline-secondary"
                                data-licencia="${JSON.stringify(i).replace(/"/g,"&quot;")}"
                                onclick="eliminarLicencia(this)">
                                <i class="bi bi-trash" title="Eliminar"></i>
                            </button>`}}]},[],"export_licencias");$(window).resize(function(){t.columns.adjust().draw()})}function eliminarLicencia(n){setTimeout(()=>{let t=JSON.parse(n.getAttribute("data-licencia"));const i=formatDateInputForDateField(t.FechaInicio);mostrarAlertaConfirmacion({titulo:`¿Estás seguro de que deseas eliminar la licencia de '${t.NombreLicencia}' con fecha de inicio '${i}'?`,backdrop:!1,onConfirmar:function(){$.ajax({url:AppConfig.urls.EliminarLicencia,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({idEnte:t.EntidadId,idEnteLicencia:t.LicenciaId,fechaInicio:toISODate(t.FechaInicio)}),dataType:"json"}).done(function(n){if(n.success){mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success);let n=$("#tableLicencias").DataTable();n.ajax.reload(null,!1)}else registrarErrorjQuery(n.status,n.message)}).fail(function(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)})}})},300)}function verLicenciasAnuales(n){const t=JSON.parse(n.getAttribute("data-ente"));$("#idEnteLicenciasAnuales").val(t.ENT_Id);$("#licenciasAnual, #fechaInicioAnual, #fechaFinAnual, #contrato").val("");ObtenerLicenciasAnual(t.ENT_Id);$("#modalLicenciasAnuales").modal("show")}function ObtenerLicenciasAnual(n){const t=inicializarDataTable("#tableEntesLicAnual",{paging:!1,searching:!1,info:!1,ordering:!1,dom:"t",ajax:{url:AppConfig.urls.ObtenerLicenciasAnualPorEnte,type:"GET",data:{idEnte:n},dataSrc:""},columns:[{data:"NombreLicenciaAnual",title:"Licencia Anual",render:function(n){return`<span title="${n}">${n}</span>`}},{data:"FechaInicio",title:"Fecha Inicio",render:formatDateToDDMMYYYY},{data:"FechaFin",title:"Fecha Fin",render:formatDateToDDMMYYYY},{className:"td-btn",data:null,title:'<span class="sReader">Acción<\/span>',responsivePriority:2,orderable:!1,render:function(n,t,i){return`
                            <button type="button" class="btn btn-icon btn-eliminar btn-outline-secondary"
                                data-licencia="${JSON.stringify(i).replace(/"/g,"&quot;")}"
                                onclick="eliminarLicenciaAnual(this)">
                                <i class="bi bi-trash" title="Eliminar"></i>
                            </button>`}}]},[],"export_licencias_anual");$(window).resize(()=>t.columns.adjust().draw())}function eliminarLicenciaAnual(n){const t=JSON.parse(n.getAttribute("data-licencia")),i=formatDateInputForDateField(t.FechaInicio);mostrarAlertaConfirmacion({titulo:`¿Estás seguro de que deseas eliminar la licencia de '${t.NombreLicenciaAnual}' con fecha de inicio '${i}'?`,backdrop:!1,onConfirmar:()=>{$.ajax({url:AppConfig.urls.EliminarLicenciaAnual,type:"POST",contentType:"application/json",data:JSON.stringify({idEnte:t.EntidadId,idLicenciaAnual:t.LicenciaAnualId,fechaInicio:toISODate(t.FechaInicio)}),dataType:"json"}).done(n=>{n.success?$("#tableEntesLicAnual").DataTable().ajax.reload(null,!1):mostrarToast(n.message,TipoToast.Warning)}).fail(function(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)})}})}const guardarEnte=async()=>{let f=$("#idEnte").val(),t=$("#nombre").val(),i=$("#email").val(),r=$("#tipoEnte").val(),e=$("#empresa").val(),o=$("#oficina").val(),s=$("#departamento").val(),n=[];if(t?$("#nombre").removeClass("is-invalid"):($("#nombre").addClass("is-invalid"),n.push("Nombre")),i?$("#email").removeClass("is-invalid"):($("#email").addClass("is-invalid"),n.push("Email")),r?$("#tipoEnte").removeClass("is-invalid"):($("#tipoEnte").addClass("is-invalid"),n.push("Tipo Entidad")),n.length>0){mostrarToast(AppConfig.mensajes.camposObligatorios+n.join(", "),TipoToast.Warning);return}let h={ENT_Id:f,ENT_Nombre:t,ENT_Email:i,ENT_TEN_Id:r,ENT_EMP_Id:e,ENT_OFI_Id:o,ENT_EDE_Id:s};try{const n=await $.ajax({url:AppConfig.urls.GuardarEnte,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(h),dataType:"json"});n.success?(mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success),$("#modalEditar").modal("hide"),$("#table").DataTable().ajax.reload(null,!1)):mostrarToast("Ya existe una entidad con el nombre o el email",TipoToast.Warning)}catch(u){const n=obtenerMensajeErrorAjax(u);registrarErrorjQuery(u.status,n)}};const guardarAplicacion=async()=>{const o=$("#idEnteAplicacion").val(),r=$("#idAplicacionOriginal").val(),u=$("#aplicaciones").val(),i=$("#fechaInicioApp").val(),n=$("#fechaFinApp").val();let t=[];if(u?$("#aplicaciones").removeClass("is-invalid"):($("#aplicaciones").addClass("is-invalid"),t.push("Aplicación")),i?$("#fechaInicioApp").removeClass("is-invalid"):($("#fechaInicioApp").addClass("is-invalid"),t.push("Fecha Inicio")),t.length){mostrarToast(AppConfig.mensajes.camposObligatorios+t.join(", "),TipoToast.Warning);return}if(n&&new Date(n)<new Date(i)){$("#fechaFinApp").addClass("is-invalid");mostrarToast("Fecha Fin no puede ser anterior a Fecha Inicio.",TipoToast.Warning);return}$("#fechaFin").removeClass("is-invalid");const f={ENL_ENT_Id:parseInt(o),ENL_APP_Id:parseInt(u),ENL_FechaInicio:formatDateToDDMMYYYY(i),ENL_FechaFin:n?formatDateToDDMMYYYY(n):null};r&&(f.ENL_APP_IdOriginal=parseInt(r));try{const n=await $.ajax({url:AppConfig.urls.GuardarAplicacionEnte,type:"POST",contentType:"application/json",data:JSON.stringify(f),dataType:"json"});n.success?(mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success),$("#idAplicacionOriginal, #aplicaciones, #fechaInicio, #fechaFin").val(""),$("#tableAplicaciones").DataTable().ajax.reload(null,!1)):mostrarToast(n.message||"Error al guardar.",TipoToast.Warning)}catch(e){registrarErrorjQuery(e.status,obtenerMensajeErrorAjax(e))}};const guardarLicencia=async()=>{let e=$("#idEnteLicencias").val(),o=$("#idLicenciaOriginal").val(),u=$("#licencias").val(),t=$("#fechaInicioOriginal").val(),n=$("#fechaInicio").val(),i=$("#fechaFin").val(),f=[];if(u?$("#licencias").removeClass("is-invalid"):($("#licencias").addClass("is-invalid"),f.push("Licencia")),n?$("#fechaInicio").removeClass("is-invalid"):($("#fechaInicio").addClass("is-invalid"),f.push("Fecha Inicio")),f.length>0){mostrarToast(AppConfig.mensajes.camposObligatorios,TipoToast.Warning);return}if(i&&n){const t=new Date(n),r=new Date(i);if(r<t){$("#fechaFin").addClass("is-invalid");mostrarToast("La Fecha Fin no puede ser anterior a la Fecha Inicio.",TipoToast.Warning);return}$("#fechaFin").removeClass("is-invalid")}let s={ENL_ENT_Id:e,ENL_LIC_IdOriginal:o,ENL_LIC_Id:u,ENL_FechaInicioOriginal:t?formatDateToDDMMYYYY(t):null,ENL_FechaInicio:n?formatDateToDDMMYYYY(n):null,ENL_FechaFin:i?formatDateToDDMMYYYY(i):null};try{const i=await $.ajax({url:AppConfig.urls.GuardarLicencia,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(s),dataType:"json"});if(i.success){mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success);$("#idLicenciaOriginal").val("");$("#licencias").val("");$("#fechaInicioOriginal").val("");$("#fechaInicio").val("");$("#fechaFin").val("");const i=`fila-${e}-${u}-${t?formatDateInputForDateField(t):formatDateInputForDateField(n)}`;sessionStorage.setItem("ultimaFilaEditada",i);let r=$("#tableLicencias").DataTable();r.ajax.reload(function(){resaltarFilaPorId(sessionStorage.getItem("ultimaFilaEditada"))},!1)}else{const n=i.message||"No se pudo guardar la licencia";mostrarToast(n,TipoToast.Warning)}}catch(r){let n=obtenerMensajeErrorAjax(r);r.responseJSON?.message&&(n=r.responseJSON.message);registrarErrorjQuery(r.status,n)}};const guardarLicenciaAnual=async()=>{let e=$("#idEnteLicenciasAnuales").val(),r=$("#licenciasAnual").val(),t=$("#fechaInicioAnual").val(),i=$("#fechaFinAnual").val(),u=$("#contrato").val(),n=[];if(r?$("#licenciasAnual").removeClass("is-invalid"):($("#licenciasAnual").addClass("is-invalid"),n.push("Licencia Anual")),t?$("#fechaInicioAnual").removeClass("is-invalid"):($("#fechaInicioAnual").addClass("is-invalid"),n.push("Fecha Inicio")),i?$("#fechaFinAnual").removeClass("is-invalid"):($("#fechaFinAnual").addClass("is-invalid"),n.push("Fecha Inicio")),u?$("#contrato").removeClass("is-invalid"):($("#contrato").addClass("is-invalid"),n.push("Contrato")),n.length>0){mostrarToast(AppConfig.mensajes.camposObligatorios,TipoToast.Warning);return}if(i&&t){const n=new Date(t),r=new Date(i);if(r<n){$("#fechaFinAnual").addClass("is-invalid");mostrarToast("La Fecha Fin no puede ser anterior a la Fecha Inicio.",TipoToast.Warning);return}$("#fechaFinAnual").removeClass("is-invalid")}const o={ELA_LAN_Id:r,ELA_ENT_Id:parseInt(e,10),ELA_FechaInicio:formatDateToDDMMYYYY(t),ELA_FechaFin:formatDateToDDMMYYYY(i),ELA_CLA_Id:u},f=await $.ajax({url:AppConfig.urls.GuardarLicenciaAnual,type:"POST",contentType:"application/json",data:JSON.stringify(o),dataType:"json"});f.success?(mostrarToast(AppConfig.mensajes.operacionOk,TipoToast.Success),$("#formEntesLicAnual")[0].reset(),$("#tableEntesLicAnual").DataTable().ajax.reload(null,!1)):mostrarToast(f.message,TipoToast.Warning)};$(document).ready(function(){async function i(){try{await VerificarSesionActiva(OpcionMenu.Entes);await u();await r();ocultarDivCargando();f();e();o();s();h();c();l()}catch(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)}}async function r(){let t=localStorage.getItem(n),i=!1;if(t){t=JSON.parse(t);$("#formBuscar").val(t.general);$("#filterNombre").val(t.nombre||"");$("#filterEmail").val(t.email||"");$("#filterTipoEntidad").val(t.tipoEntidad||"");$("#filterEmpresa").val(t.empresa||"");$("#filterOficina").val(t.oficina||"");$("#filterSinEmpresa").prop("checked",!!t.sinEmpresa);$("#filterEmpresa").prop("disabled",!!t.sinEmpresa);let{...otrosFiltros}=t;i=Object.values(otrosFiltros).some(n=>n)}setTimeout(()=>{let n=$("#table").DataTable();t?.general&&n.search(t.general,!1,!1).draw()},200);i&&($("#btnLimpiar").show(),$(".table-filter").addClass("advance"),$("#btnAvanzado").html(`Ocultar Filtros`))}function t(){let t={general:$("#formBuscar").val(),nombre:$("#filterNombre").val(),email:$("#filterEmail").val(),tipoEntidad:$("#filterTipoEntidad").val(),empresa:$("#filterEmpresa").val(),oficina:$("#filterOficina").val(),sinEmpresa:$("#filterSinEmpresa").is(":checked")};localStorage.setItem(n,JSON.stringify(t))}async function u(){return new Promise(n=>{let i=inicializarDataTable("#table",{ajax:{url:AppConfig.urls.ObtenerEntes,type:"GET",dataSrc:"",complete:function(){n()}},columns:[{data:"ENT_Nombre",title:"Nombre"},{data:"ENT_Email",title:"Email"},{data:"NombreTipoEnte",title:"Tipo de Ente"},{data:"NombreEmpresa",title:"Empresa",render:n=>n??""},{data:"NombreOficina",title:"Oficina"},{className:"td-btn",data:null,title:'<span class="sReader">Acción<\/span>',responsivePriority:2,orderable:!1,render:function(n,t,i){return`<div class="btn-group" role="group">
                            <button type="button" class="btn btn-icon btn-editar btn-outline-secondary me-2"
                                data-ente="${JSON.stringify(i).replace(/"/g,"&quot;")}" onclick="editarEnte(this)">
                                <i class="bi bi-pencil-square" title="Editar"></i>
                            </button>
                            <button type="button" class="btn btn-icon btn-verAplicaciones btn-outline-secondary me-2" title="Aplicaciones"
                                data-ente="${JSON.stringify(i).replace(/"/g,"&quot;")}" onclick="verAplicaciones(this)">
                                <i class="bi bi-grid-3x3-gap"></i>
                            </button>
                            <button type="button" class="btn btn-icon btn-verLicencias btn-outline-secondary me-2" title="Licencias"
                                data-ente="${JSON.stringify(i).replace(/"/g,"&quot;")}" onclick="verLicencias(this)">
                                <i class="bi bi-file-earmark-lock"></i>
                            </button>
                            <button type="button" class="btn btn-icon btn-verLicencias btn-outline-secondary me-2" title="Licencias Anuales"
                                data-ente="${JSON.stringify(i).replace(/"/g,"&quot;")}" onclick="verLicenciasAnuales(this)">
                                <i class="bi bi-calendar2-range"></i>
                            </button>
                            <button type="button" class="btn btn-icon btn-eliminar btn-outline-secondary me-2"
                                data-ente="${JSON.stringify(i).replace(/"/g,"&quot;")}"
                                onclick="eliminarEnte(this)">
                                <i class="bi bi-trash" title="Eliminar"></i>
                            </button>
                            </div>`}}]},[],"export_entes");$(window).resize(function(){i.columns.adjust().draw()});$("#formBuscar").on("keyup input",function(){i.search(this.value,!1,!1).draw();i.responsive.rebuild();i.responsive.recalc();i.columns.adjust();i.draw(!1);t()})})}async function f(){try{const t=await $.ajax({url:AppConfig.urls.ObtenerTiposEnte,type:"GET",dataType:"json"}),n=$("#tipoEnte");n.empty().append('<option value="">Seleccione Tipo Ente<\/option>');t.forEach(t=>{n.append(`<option value="${t.TEN_Id}">${t.TEN_Nombre}</option>`)})}catch(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)}}async function e(){try{const t=await $.ajax({url:AppConfig.urls.ObtenerOficinas,type:"GET",dataType:"json"}),n=$("#oficina");n.empty().append('<option value="">Seleccione Oficina<\/option>');t.forEach(t=>{n.append(`<option value="${t.OFI_Id}">${t.OFI_Nombre}</option>`)})}catch(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)}}async function o(){try{const t=await $.ajax({url:AppConfig.urls.ObtenerComboEmpresas,type:"GET",dataType:"json"}),n=$("#empresa");n.empty().append('<option value="">Seleccione Empresa<\/option>');t.forEach(t=>{n.append(`<option value="${t.EMP_Id}">${t.EMP_Nombre}</option>`)})}catch(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)}}async function s(){try{const t=await $.ajax({url:AppConfig.urls.ObtenerAplicaciones,type:"GET",dataType:"json"}),n=$("#aplicaciones");n.empty().append('<option value="">Seleccione Aplicación<\/option>');t.forEach(t=>{n.append(`<option value="${t.APP_Id}">${t.APP_Nombre}</option>`)})}catch(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)}}async function h(){try{const t=await $.ajax({url:AppConfig.urls.ObtenerComboLicencias,type:"GET",dataType:"json"}),n=$("#licencias");n.empty().append('<option value="">Seleccione Licencia<\/option>');t.forEach(t=>{n.append(`<option value="${t.LIC_Id}">${t.LIC_Nombre}</option>`)})}catch(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)}}async function c(){try{const t=await $.ajax({url:AppConfig.urls.ObtenerComboLicenciasAnual,type:"GET",dataType:"json"}),n=$("#licenciasAnual");n.empty().append('<option value="">Seleccione Licencia Anual<\/option>');t.forEach(t=>{n.append(`<option value="${t.LAN_Id}">${t.LAN_Nombre}</option>`)})}catch(n){const t=obtenerMensajeErrorAjax(n);registrarErrorjQuery(n.status,t)}}async function l(){try{const n=await $.ajax({url:AppConfig.urls.ObtenerContratosLicenciasAnuales,type:"GET",dataType:"json"}),t=$("#contrato").empty().append('<option value="">Seleccione contrato<\/option>');n.forEach(n=>{t.append(`<option value="${n.CLA_Id}">${n.Display}</option>`)})}catch(n){console.error("Error cargando contratos:",n);mostrarToast("No se pudieron cargar los contratos",TipoToast.Error)}}const n=Filtros.Entidades;i();$("#btnNuevo").on("click",function(){$("#idEnte").val("-1");$("#nombre").val("");$("#email").val("");$("#tipoEnte").val("");$("#empresa").val("");$("#oficina").val("");$("#departamento").val("");$("#modalEditarLabel").text("Nueva Entidad");$("#modalEditar").modal("show")});$("#btnBuscar").on("click",function(){let i=$("#filterNombre").val(),r=$("#filterEmail").val(),u=$("#filterTipoEntidad").val(),f=$("#filterEmpresa").val(),e=$("#filterOficina").val(),o=$("#filterSinEmpresa").is(":checked"),n=$("#table").DataTable();n.columns(0).search(i).draw();n.columns(1).search(r).draw();n.columns(2).search(u).draw();o?n.columns(3).search("^\\s*$",!0,!1):n.columns(3).search(f,!1,!1);n.columns(4).search(e).draw();t()});$("#empresa").on("change",async function(){const n=$(this).val();n?await cargarComboDepartamentosEmpresa(n):$("#departamento").empty().append('<option value="">Seleccione Departamento<\/option>')});$("#filterSinEmpresa").on("change",function(){const n=$(this).is(":checked");$("#filterEmpresa").prop("disabled",n);n&&$("#filterEmpresa").val("")})});